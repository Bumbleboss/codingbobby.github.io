<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>modules/components/generators.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/CodingBobby/traktify/issues" target="_blank" class="menu-item" id="issues_link" >Bugs & Issues</a></h2><h2><a href="https://circleci.com/gh/CodingBobby/traktify" target="_blank" class="menu-item" id="build_link" >Build Log</a></h2><h2><a href="https://discord.gg/BJNAMcj" target="_blank" class="menu-item" id="discord_link" >Discord Server</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-cache_.html">Cache</a></li><li><a href="tutorial-config.html">Configuration</a></li><li><a href="tutorial-contributing.html">Contributing</a></li><li><a href="tutorial-helpers.html">Helpers</a></li><li><a href="tutorial-items.html">Items</a></li></ul><h3>Classes</h3><ul><li><a href="Cache.html">Cache</a><ul class='methods'><li data-type='method'><a href="Cache.html#getKey">getKey</a></li><li data-type='method'><a href="Cache.html#remove">remove</a></li><li data-type='method'><a href="Cache.html#removeKey">removeKey</a></li><li data-type='method'><a href="Cache.html#save">save</a></li><li data-type='method'><a href="Cache.html#setKey">setKey</a></li></ul></li><li><a href="Queue.html">Queue</a><ul class='methods'><li data-type='method'><a href="Queue.html#_duplicates">_duplicates</a></li></ul></li><li><a href="showBuffer.html">showBuffer</a></li></ul><h3>Namespaces</h3><ul><li><a href="generators.html">generators</a><ul class='methods'><li data-type='method'><a href="generators.html#.actionBtns">actionBtns</a></li><li data-type='method'><a href="generators.html#.alertBox">alertBox</a></li><li data-type='method'><a href="generators.html#.infoCardContent">infoCardContent</a></li><li data-type='method'><a href="generators.html#.infoCardDummy">infoCardDummy</a></li><li data-type='method'><a href="generators.html#.searchResult">searchResult</a></li><li data-type='method'><a href="generators.html#.upNextPoster">upNextPoster</a></li><li data-type='method'><a href="generators.html#.upNextTitle">upNextTitle</a></li></ul></li><li><a href="helper.html">helper</a><ul class='methods'><li data-type='method'><a href="helper.html#.clone">clone</a></li><li data-type='method'><a href="helper.html#.debugLog">debugLog</a></li><li data-type='method'><a href="helper.html#.inRange">inRange</a></li><li data-type='method'><a href="helper.html#.nthParent">nthParent</a></li><li data-type='method'><a href="helper.html#.shadeHexColor">shadeHexColor</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#addHistoryUpdates">addHistoryUpdates</a></li><li><a href="global.html#APP_PATH">APP_PATH</a></li><li><a href="global.html#cacheListener">cacheListener</a></li><li><a href="global.html#cacheRequest">cacheRequest</a></li><li><a href="global.html#cacheSave">cacheSave</a></li><li><a href="global.html#getAPIKeys">getAPIKeys</a></li><li><a href="global.html#getUnfinishedProgressList">getUnfinishedProgressList</a></li><li><a href="global.html#initFileStructure">initFileStructure</a></li><li><a href="global.html#newActivitiesAvailable">newActivitiesAvailable</a></li><li><a href="global.html#openInfoCard">openInfoCard</a></li><li><a href="global.html#PATHS">PATHS</a></li><li><a href="global.html#postHistoryUpdates">postHistoryUpdates</a></li><li><a href="global.html#readConfig">readConfig</a></li><li><a href="global.html#removeCacheFiles">removeCacheFiles</a></li><li><a href="global.html#requestAndLoadImage">requestAndLoadImage</a></li><li><a href="global.html#requestHistoryUpdatePosting">requestHistoryUpdatePosting</a></li><li><a href="global.html#resetConfig">resetConfig</a></li><li><a href="global.html#saveConfig">saveConfig</a></li><li><a href="global.html#show">show</a></li><li><a href="global.html#showAlertBoxAndWait">showAlertBoxAndWait</a></li><li><a href="global.html#startsWithFilter">startsWithFilter</a></li><li><a href="global.html#toggleClass">toggleClass</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">modules/components/generators.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * The generators module includes functions that either return HTMLElements or HTML-formatted strings
 * that are used as templates for building blocks of the app.
 * Most functions take arguments providing content to fill these templates.
 * @namespace generators
 */

module.exports = {
  infoCardDummy, infoCardContent,
  searchResult, upNextPoster, upNextTitle,
  alertBox
}


/**
 * Generates an element containing the basic html structure of a single info card.
 * @memberof generators
 * @param {'left_stack'|'middle_stack'|'right_stack'} stack Card stack it will be placed onto
 * @param {Number} index Position of this card in the total stack
 * @param {String} id Reference ID for trakt database
 * @returns {HTMLElement}
 */
function infoCardDummy(stack, index, id) {
  let infocard = document.createElement('div')
  infocard.classList.add('infocard', 'shadow_b', stack)
  infocard.id = 'card_'+index
  infocard.dataset.trakt_id = id
  infocard.innerHTML = `
    &lt;div id="infocard_close" class="btn-close black_d_b z4 elmHover" onclick="triggerInfoCardOverlay()">
      &lt;img src="../../assets/icons/app/close.svg">
    &lt;/div>
    &lt;div class="cardcontent">
      &lt;div class="center">
        &lt;img class="logo gray-animation" style="height: 200px" src="../../assets/icons/traktify/512x512.png">
      &lt;/div>
    &lt;/div>
  `
  return infocard
}


/**
 * Generates html-string containing all elements that are placed inside one info card.
 * @memberof generators
 * @param {Object} item 
 * @param {Number} item.ratingPercent
 * @param {Number} item.seasonNumber
 * @param {Number} item.episodeNumber
 * @param {String} item.episodeTitle
 * @param {String} item.description
 * @returns {String}
 */
function infoCardContent(item) {
  let html = ` 
    &lt;div class="infocard_child black_b z4">
      &lt;div id="infocard_close" class="btn-close black_d_b z4 elmHover" onclick="triggerInfoCardOverlay()">
        &lt;img src="../../assets/icons/app/close.svg">
      &lt;/div>
      &lt;div class="infocard_left">
        &lt;img src="">
        &lt;img src="" class="shadow_b">
      &lt;/div>
      &lt;div class="infocard_right">
        &lt;h2 class="h2 white_t" style="margin: 0 0 12px">${item.episodeTitle}&lt;/h2>
        &lt;div class="horizontal_border">&lt;/div>
        &lt;p class="p white_d_t" style="margin-bottom:0">${item.description}&lt;/p>
        ${actionBtns(item.matcher, 'card')}
      &lt;/div>
    &lt;/div> 
  `
  return html
}


/**
 * Generates a html element for one search result and adds it to the sidebar.
 * @memberof generators
 * @param {Object} item 
 * @param {String} item.img
 * @param {String} item.title
 * @param {String} item.description
 * @param {String} item.type
 * @param {Number} item.rating
 * @param {Number} item.id Reference ID for TMDB database
 * @returns {HTMLElement}
 */
function searchResult(item) {
  let panel_box = document.createElement('div')
  panel_box.classList.add('panel_box', 'search', 'animation_slide_right')
  panel_box.innerHTML = `
    &lt;img class="poster" src="${item.img}">
    &lt;div class="panel_box_container">
      &lt;h3 class="fs18 tOverflow">${item.title}&lt;/h3>
      &lt;p class="tOverflow normal">${item.description}&lt;/p>
      &lt;div class="poster-content">
        &lt;div class="poster-content-left">
          &lt;img src="../../assets/icons/app/heart.svg">
          &lt;span class="fs16">${item.rating}%&lt;/span>
        &lt;/div>
        &lt;div class="poster-content-right tC">${item.type}&lt;/div>
      &lt;/div>
    &lt;/div>
  `
  return panel_box
}


/**
 * Generates the an element for a single poster that is displayed on the up-next dashboard.
 * @memberof generators
 * @param {Object} item
 * @param {String} item.title
 * @param {String} item.subtitle
 * @param {Number} item.rating
 * @param {String} item.id Reference ID for TVDB database
 * @param {Number} item.season
 * @param {String} item.matcher
 * @returns {HTMLElement}
 */
function upNextPoster(item) {
  let li = document.createElement('li')

  li.classList.add('poster', 'poster_dashboard')
  li.setAttribute('data_title', item.title)
  li.setAttribute('data_subtitle', item.subtitle)
  li.setAttribute('onmouseover', 'animateText(this, true)')
  li.setAttribute('onmouseleave', 'animateText(this, false)')

  let posterTile = document.createElement('div')
  posterTile.classList.add('hidden')

  posterTile.innerHTML = `
    &lt;div class="poster_tile shadow_h">
      &lt;div class="poster_rating">
        &lt;img src="../../assets/icons/app/heart.svg">&lt;span class="fw700 white_t">${Math.round(item.rating*10)}%&lt;/span>
      &lt;/div>
      ${actionBtns(item.matcher, 'poster')}
    &lt;/div>
  `

  li.appendChild(posterTile)

  requestAndLoadImage({
    parent: li,
    use: 'poster',
    type: 'season',
    itemId: item.id,
    reference: item.season,
    classes: ['shadow_h', 'z1'],
    attributes: {
      'style': 'cursor:pointer',
      'onclick': 'openInfoCard(this)',
      'data_matcher': item.matcher
    }
  }, () => {
    posterTile.classList.remove('hidden')
  })

  return li
}

/**
 * Generates html-string used for the title block on the up-next dashboard.
 * @memberof generators
 * @param {Object} item 
 * @param {String} item.title
 * @param {String} item.subtitle
 * @returns {String}
 */
function upNextTitle(item) {
  let html = `
    &lt;h3 class="h3 red_t tu">
      up next to watch
    &lt;/h3>
    &lt;h1 class="h1 white_t tu tOverflow">
      ${item.title}
    &lt;/h1>
    &lt;h1 class="h1 white_d_t tOverflow">
      ${item.subtitle}
    &lt;/h1>
  `
  return html
}


/**
 * Generates html-string containing the action buttons
 * @memberof generators
 * @param {Object} matcher 
 * @param {'poster'|'card'} modal
 * @returns {String}
 */
function actionBtns(matcher, modal) {
  let q = "'"
  return `
  &lt;div class="action_btns">
    &lt;div class="action_btn play tu elmHover" onclick="playNow(this, ${q+matcher+q}, ${q+modal+q})">&lt;/div>
    &lt;div class="action_btn watchlist tu elmHover" onclick="addToWatchlist(this, ${q+matcher+q}, ${q+modal+q})">&lt;/div>
    &lt;div class="action_btn history tu elmHover" onclick="addToHistory(this, ${q+matcher+q}, ${q+modal+q})">&lt;/div>
  &lt;/div>
  `
}

/**
 * Generates html-string used for the alert box
 * @memberof generators
 * @param {Object} options 
 * @param {String} options.title
 * @param {String} options.description
 * @param {String} options.acceptButtonText
 * @param {String} options.declineButtonText
 * @returns {String}
 */
function alertBox(options, proceed) {
  return `
    &lt;div class="alertBox black_b shadow_h">
      &lt;div class="btn-close black_d_b elmHover" onclick="${proceed(false)}">
        &lt;img src="../../assets/icons/app/close.svg">
      &lt;/div>
      &lt;h4 class="fs23 fw700 white_t">${options.title}&lt;/h4>
      &lt;p class="fs18 fw200 white_d_t" style="margin-bottom:10px">${options.description}&lt;/p>
      &lt;div class="alert_btns">
        &lt;div class="alert_btn red_b white_t elmHover" onclick="${proceed(true)}">${options.acceptButtonText}&lt;/div>
        &lt;div class="alert_btn black_d_b white_t elmHover" onclick="${proceed(false)}">${options.declineButtonText}&lt;/div>
      &lt;/div>
    &lt;/div>
  `
}</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated with <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a>.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
