let t=0,fr=90,v=fr/20,running=!1,touched=!1,cvs={height:600,width:600},btn={start:{text:()=>{return running?'PAUSE':'  PLAY'},x:5,y:5,height:20,width:42},reset:{text:'RESET',x:52,y:5,height:20,width:42}},wayPoints={a:[],b:[],s:[]},speedPoints={a:[],b:[],s:[]},spheres={a:{},b:{},move:function(){if(this.b.x<this.a.x+this.a.r+this.b.r&&(touched=!0),!touched)this.a.x+=v,this.b.x-=v;else{let a=this.a.r,c=this.b.r;this.a.x-=v*(2*c/(a+c)),this.b.x+=v*(2*a/(a+c))}}},drawing=!0,textStart=20,inputWidth=23,sidebar={width:100,height:80},aSlider,bSlider;function setup(){createCanvas(cvs.width,cvs.height),textSize(50),frameRate(fr),aSlider=createSlider(5,300,80),aSlider.position(10,2*textStart),aSlider.style('width','80px'),bSlider=createSlider(5,300,10),bSlider.position(10,3*textStart),bSlider.style('width','80px')}function draw(){for(var a in 0==t&&(spheres.a.r=aSlider.value(),spheres.a.x=1*canvas.width/4-spheres.a.r,spheres.a.y=canvas.height/2,spheres.b.r=bSlider.value(),spheres.b.x=3*canvas.width/4+spheres.b.r,spheres.b.y=canvas.height/2),background(60),fill(60),strokeWeight(3),push(),fill(40),noStroke(),rect(0,0,sidebar.width,sidebar.height),pop(),push(),fill(120),noStroke(),rect(btn.start.x,btn.start.y,btn.start.width,btn.start.height),textStart=btn.start.height+20,fill(240),textSize(10),text(btn.start.text(),btn.start.x+5,textStart-21),pop(),push(),fill(120),noStroke(),rect(btn.reset.x,btn.reset.y,btn.reset.width,btn.reset.height),textStart=btn.reset.height+20,fill(240),textSize(10),text(btn.reset.text,btn.reset.x+5,textStart-21),pop(),push(),stroke(220,60,10),speedPoints.a)point(speedPoints.a[a].x,speedPoints.a[a].y);for(var a in pop(),push(),stroke(10,200,60),speedPoints.b)point(speedPoints.b[a].x,speedPoints.b[a].y);for(var a in pop(),push(),stroke(30,80,200),speedPoints.s)point(speedPoints.s[a].x,speedPoints.s[a].y);pop();let c=!!(spheres.a.x&&spheres.a.y),d=!!(spheres.b.x&&spheres.b.y);c&&d&&(push(),stroke(220,60,10),noFill(),ellipse(spheres.a.x,spheres.a.y,2*spheres.a.r),pop(),push(),stroke(10,200,60),noFill(),ellipse(spheres.b.x,spheres.b.y,2*spheres.b.r),pop(),running&&(t++,spheres.move(),wayPoints.a.push({x:5*t,y:spheres.a.x+spheres.a.r+2*canvas.width/4-5}),wayPoints.b.push({x:5*t,y:canvas.height-spheres.b.x+spheres.b.r+2*canvas.width/4-5}),wayPoints.s.push({x:5*t,y:canvas.height-Math.abs(spheres.a.x+spheres.a.r-spheres.b.x-spheres.b.r)}),1<t&&(speedPoints.a.push({x:wayPoints.a[t-1].x,y:canvas.height-50*Math.abs(wayPoints.a[t-2].y-wayPoints.a[t-1].y)}),speedPoints.b.push({x:wayPoints.b[t-1].x+2.5,y:canvas.height-50*Math.abs(wayPoints.b[t-2].y-wayPoints.b[t-1].y)}),speedPoints.s.push({x:wayPoints.s[t-1].x,y:canvas.height-50*Math.abs(wayPoints.s[t-2].y-wayPoints.s[t-1].y)}))))}function mousePressed(){let a=mouseX,c=mouseY;onButton(btn.start,a,c)?running?running=!1:running=!0:onButton(btn.reset,a,c)&&(t=0,wayPoints={a:[],b:[],s:[]},speedPoints={a:[],b:[],s:[]},running=!1,touched=!1)}function onButton(a,c,d){return c>a.x&&c<a.width+a.x&&d>a.y&&d<a.height+a.y}
